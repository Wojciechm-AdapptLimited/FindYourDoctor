@using FindYourDoctor.Data.Domain
@using Microsoft.AspNetCore.Identity

@inject UserManager<User> UserManager
@inject IUserStore<User> UserStore
@inject AuthenticationStateProvider AuthenticationStateProvider

<MudText Typo="Typo.h5">Change Password</MudText>
<MudForm @ref="_form" @bind-IsValid="@_success" Style="height: 100%;">
    <div style="height: 80%; padding: 50px;">
        <MudTextField T="string" Label="Old Password" @bind-Value="CurrentPassword" Required="true" 
                      Validation="@(new Func<string, Task<string?>>(ValidateCurrentPassword))"/>
        <MudTextField T="string" Label="New Username" @bind-Value="Password" Required="true"
                      Validation="@(new Func<string, IEnumerable<string>>(ValidatePassword))"/>
        <MudTextField T="string" Label="Confirm New Username" @bind-Value="ConfirmPassword" Required="true"
                      Validation="@(new Func<string, string?>(ValidateConfirmPassword))"/>
    </div>
    <div class="d-flex align-center justify-end" style="margin-top: 10px;">
        <MudButton Variant="Variant.Outlined" Color="Color.Primary" Class="mx-2" OnClick="Cancel">Cancel</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mx-2" OnClick="Submit">Save</MudButton>
    </div>
</MudForm>  